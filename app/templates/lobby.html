<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        {% if title %}
            <title>{{ title }}</title>
        {% else %}
            <title>WePay Transactions</title>
        {% endif %}
        <script src="../static/libs/d3.v3.min.js" charset="utf-8" type="text/javascript"></script>
        <script src="../static/libs/topojson.v1.min.js" type="text/javascript"></script>
        <script src="../static/libs/queue.v1.min.js"></script>
        <link rel="stylesheet" type="text/css" href="../static/css/about-lobby.css">
        <link rel="stylesheet" type="text/css" href="../static/css/map.css">
        <!-- Need the following to enable Lato font -->
        <link href='http://fonts.googleapis.com/css?family=Lato:300,700' rel='stylesheet' type='text/css'>
    </head>
    <body>    
        <div id="container">
            <div class="map-header">
                <div class="map-header-text">
                    We help <span class="green">power</span> the new <span class="green">economy</span>
                </div>
            </div>

            <div id="vis">            
                <div id="loading"><br>Loading ...</div>
            </div>

            <div class="map-footer">
                <!-- This value is manipulated by d3 later. 
                     removing the counter in lobbypage.js would prevent this. -->
                <div id="footer-label">0</div>
                <div id="footer-sublabel">Counts today</div>
            </div>

        </div>
        <script src="../static/js/lobbypage.js" type="text/javascript"></script>
        <script src="../static/js/wepay/util.js" type="text/javascript"></script>
        <script src="../static/js/wepay/counter.js" type="text/javascript"></script>
        <script src="../static/js/wepay/mapChart.js" type="text/javascript"></script>
        <script type="text/javascript">
            window.onload = function() {
                var dataFile       = "{{ datafile }}",
                    maxpauseMS     = parseInt( "{{ maxpause_ms }}" ),
                    counterStart   = parseInt( "{{ counter_start }}" );

                if (dataFile.length) {
                    mapWithCounter(dataFile, maxpauseMS, counterStart, "footer-label");
                
                } else { // error finding file
                    d3.select("#loading")
                        .html("<br>404: We're sorry, the specified data could not be located");
                }
            };
        </script>

    </body>
</html>





	    