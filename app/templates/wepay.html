<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        {% if title %}
            <title>{{ title }}</title>
        {% else %}
            <title>WePay transactions visualization</title>
        {% endif %}
        <script src="../static/libs/d3.v3.min.js" charset="utf-8" type="text/javascript"></script>
        <script src="../static/libs/topojson.v1.min.js" type="text/javascript"></script>
        <!-- <script src="http://d3js.org/queue.v1.min.js"></script> -->
        <link rel="stylesheet" type="text/css" href="../static/css/transactions.css">
        <link href='http://fonts.googleapis.com/css?family=Lato:100,200,400' rel='stylesheet' type='text/css'>
    </head>
    <body>
        <div id="container">
	     	<div id="vis">            
                <div id="loading"><br>Loading ...</div>
            </div>
	    </div>
	    <script src="../static/js/transactions.js" type="text/javascript"></script>
        <script type="text/javascript">
            window.onload = function() {
                var callback_domain = "{{ callback_domain }}",
                    maxpause_ms     = parseInt( "{{ maxpause_ms }}" ),
                    datafile        = "{{ datafile }}",
                    loop            = eval( {{loopbool_as_str}} );
                
                if (datafile.length > 0) {
                    make_vis(datafile, loop, maxpause_ms, callback_domain);
                
                } else { // error finding file
                    d3.select("#loading")
                        .html("<br>404: We're sorry, the specified data could not be located");
                }
            };
        </script>
    </body>
</html>